#!/usr/bin/env bash
GO_VERSION="$1"
if [ "${GO_VERSION}" == "" ]; then
  echo "Usage: setgover <go_ver>"
  exit 1
fi
config_json="${DOTFILES_DIR}/config/config.json"
tmpfile=$(mktemp)
jq ".versions.go=\"$1\"" "${config_json}" > $tmpfile && mv "${tmpfile}" "${config_json}"

ln -sf "/Users/miksch1/go/go${GO_VERSION}/bin/go" /usr/local/bin/go >/dev/null 2>&1

export PATH
export GOROOT
PATH="$(${DOTFILES_DIR}/paths/early/go.sh):${PATH}"
GOROOT="$(${DOTFILES_DIR}/exports/goroot.sh)"